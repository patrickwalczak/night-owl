datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

enum ProductStatus {
  NEW
  SALE
  PROMOTION
  DEFAULT
}

model Product {
  id          String        @id @default(cuid())
  name        String
  description String
  price       Float
  currency    String        @default("USD")
  slug        String        @unique //
  quantity    Int           @default(100)
  inStock     Boolean       @default(true)
  image       String
  createdAt   DateTime      @default(now())
  updatedAt   DateTime      @updatedAt
  status      ProductStatus @default(DEFAULT)

  categoryId String
  category   Category @relation(fields: [categoryId], references: [id])

  parameterValues ProductParameterValue[]
}

model ParameterValue {
  id    String @id @default(cuid())
  value String
  count Float

  parameterId String
  parameter   Parameter @relation(fields: [parameterId], references: [id])

  products ProductParameterValue[]
}

model ProductParameterValue {
  id               String @id @default(cuid())
  productId        String
  parameterValueId String

  product        Product        @relation(fields: [productId], references: [id])
  parameterValue ParameterValue @relation(fields: [parameterValueId], references: [id])
}

model Parameter {
  id          String   @id @default(cuid())
  name        String   @unique
  description String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  categories CategoryParameter[]
  values     ParameterValue[]
}

model CategoryParameter {
  id          String @id @default(cuid())
  categoryId  String
  parameterId String

  category  Category  @relation(fields: [categoryId], references: [id])
  parameter Parameter @relation(fields: [parameterId], references: [id])
}

model Category {
  id       String     @id @default(cuid())
  name     String
  parentId String?
  slug     String     @unique
  parent   Category?  @relation("Subcategories", fields: [parentId], references: [id])
  children Category[] @relation("Subcategories")

  products Product[]

  createdAt         DateTime            @default(now())
  updatedAt         DateTime            @updatedAt
  CategoryParameter CategoryParameter[]
}

/**
 * Hanging lamps
 * Chandeliers
 * Ceiling lamps
 * Ceiling lights
 * Wall lamps
 * Floor lamps
 * Desk lamps
 * Table lamps
 */

/**
 * 'LumaLight Co.',
 * 'BrightNest',
 * 'GlowMark Lighting',
 * 'Aurora Fixtures',
 * 'Nocturne Lights',
 * 'Zenith Illumination',
 * 'HaloCraft',
 * 'LightWorx',
 * 'VividRay',
 * 'NexaLux',
 */
